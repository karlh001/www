<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="generator" content="Zim 0.76.1">
    <meta name="description" content="Personal website for my programming, computing and finance hobbies"> 
    <meta name="keywords" content="karl, hunter, go, programming, computing, finance, personal, hobby, defiant-fg, defiant"> 
    <meta name="Zim template" content="HGE Bootstrap responsive template" />
    <meta name="template author" content="Hugo Gaibor E.">
    <meta name="Author" content="Karl Hunter">
    <link rel="icon" href="../../../_resources/images/favicon.ico">

    <title>Saturday 23 Sep 2023</title>

    <!-- JS Jquery and Bootstrap scripts -->
    <script type='text/javascript' src="https://karlhunter.co.uk/res/js/jquery-3.6.0.min.js" type="text/javascript"></script>
    <script src="https://karlhunter.co.uk/res/js/bootstrap.min.js"></script>

    <!-- Bootstrap core CSS -->
      <link href="https://karlhunter.co.uk/res/css/bootstrap.css" rel="stylesheet" />

    <!-- highlight module
         Syntax highlinting libraries 
         Taken from https://highlightjs.org/ 
         https://github.com/highlightjs/highlight.js
         You can change higlight code box style by choosing a different css style below, 
         all styles were included for ease of customization
      -->
      <link rel="stylesheet" href="https://karlhunter.co.uk/res/highlight/styles/base16/github.min.css">
      <script src="https://karlhunter.co.uk/res/highlight/highlight.min.js"></script>

    <!-- HGE styles and JS functions for this template -->
      <link href="https://karlhunter.co.uk/res/css/hge-bootstrap_common.css" rel="stylesheet">
      <script src="https://karlhunter.co.uk/res/js/hge-bootstrap_common.js"></script>
      <script src="https://karlhunter.co.uk/res/js/hge-bootstrap_multi-page.js"></script>
  </head>

  <body>
    <nav class="navbar navbar-dark sticky-top bg-dark flex-md-nowrap p-1 justify-content upper-nav-bar">
      <div class="btn-toolbar" role="toolbar" aria-label="Button groups">
        <div class="btn-group mr-2" role="group" aria-label="First group">
          <span class="text-white">
            <img id="toggleSideMenu" class="pt-0 p-0 px-0 btn" src="https://karlhunter.co.uk/res/images/menu.svg" height="22" alt="Menu">
          </span>
        </div>
      </div>
      <div class="btn-toolbar" role="toolbar" aria-label="Button groups">
        <div class="btn-group mr-2" role="group" aria-label="Navigation group">
              <button type="button" class="btn btn-info btn-xs" role="button" onclick="location.href='./04.html'">Prev</button>
  
              <button type="button" class="btn btn-info btn-xs" role="button" onclick="location.href='../../../map.html'">Index</button>

              <button type="button" class="btn btn-info btn-xs" role="button" onclick="location.href='../10.html'">Next</button>
        </div>
      </div>
      <div>
        <div class="btn-group mr-2" role="group" aria-label="Fifth group">
          <button class="btn btn-warning btn-xs" id="scrollUp" onclick="scrollToTop();" style="display: none;"><span style="font-weight: 500;">Scroll Up</span></button>
        </div>
        <div class="btn-group mr-2" role="group" aria-label="Fifth group">
          <button class="btn btn-success btn-xs pt-0 p-0 px-0" id="printMe" >
              <img id="printImg"  class="pt-0 p-0 px-1" style="padding:2px;" onclick="window.print();" src="https://karlhunter.co.uk/res/images/printer.svg" alt="Print">
          </button>
        </div>
      </div>
    </nav>

    <div class="container-fluid">
      <div class="row">
          <nav class="col-md-3 col-lg-2 d-md-block bg-light sidebar d-print-none" id="sidebarMenuNav" style="padding-top: 40px;">
          <div id="sidebarMenu">
            <ul>
<li><a href="../../../About.html" title="About" class="page">About</a></li>
<li><a href="../../../Buy_Me_Coffee.html" title="Buy Me Coffee" class="page">Buy Me Coffee</a></li>
<li><a href="../../../Computing.html" title="Computing" class="page">Computing</a></li>
<li><a href="../../../Contact.html" title="Contact" class="page">Contact</a></li>
<li><a href="../../../index.html" title="index" class="page">index</a></li>
<li><a href="../../../Journal.html" title="Journal" class="page">Journal</a>
<ul>
<li><a href="../../2022.html" title="2022" class="page">2022</a></li>
<li><a href="../../2023.html" title="2023" class="page">2023</a>
<ul>
<li><a href="../01.html" title="01" class="page">01</a></li>
<li><a href="../02.html" title="02" class="page">02</a></li>
<li><a href="../03.html" title="03" class="page">03</a></li>
<li><a href="../04.html" title="04" class="page">04</a></li>
<li><a href="../07.html" title="07" class="page">07</a></li>
<li><a href="../08.html" title="08" class="page">08</a></li>
<li><a href="../09.html" title="09" class="page">09</a>
<ul>
<li><a href="./02.html" title="02" class="page">02</a></li>
<li><a href="./04.html" title="04" class="page">04</a></li>
<li><b>23</b></li>
</ul></li>
<li><a href="../10.html" title="10" class="page">10</a></li>
<li><a href="../11.html" title="11" class="page">11</a></li>
<li><a href="../12.html" title="12" class="page">12</a></li>
</ul></li>
<li><a href="../../2024.html" title="2024" class="page">2024</a></li>
<li><a href="../../2025.html" title="2025" class="page">2025</a></li>
<li><a href="../../Index.html" title="Index" class="page">Index</a></li>
</ul></li>
<li><a href="../../../Money.html" title="Money" class="page">Money</a></li>
<li><a href="../../../Projects.html" title="Projects" class="page">Projects</a></li>
</ul>

          </div>
        </nav>

        <main role="main" class="col-md-9 col-lg-10 ml-sm-auto pt-3 px-4" id="pageContents">
            <noscript>
              <div style="padding: 10px">
                <span style="color:#D48D8D">
                <p>Javascript is not enabled</p>
                <p>Most features won't</p>
                <p>work correctly</p>
                <p>Please enable javascript</p></span>
              </div>
            </noscript>

                <h1>Saturday 23 Sep 2023<a name='Saturday 23 Sep 2023_1_1' class="offset-anchor"></a></h1>
              
<hr>


                <h1>AWS Glacier: Test Restore<a name='AWS Glacier: Test Restore_1_2' class="offset-anchor"></a></h1>
              <p>
I have previously discussed my backup strategy and how I use <a href="../../../Computing/Backup/AWS_S3.html" title="AWS Glacier" class="page">AWS Glacier</a> as my last chance to store my pictures if all else fails. I realised I have not tested my backup. Testing backups are essential; it forms part of the 3:2:1:0 rule. 
</p>

<ul>
<li>3 copies in total, of which:</li>
<li>2 local copies, and </li>
<li>1 off site, with</li>
<li>0 errors</li>
</ul>

<p>
Mine looks like:
</p>

<ul>
<li>6 copies</li>
<li>3 local copies</li>
<li>3 off site</li>
<li>0 errors (confirmed today)</li>
</ul>

<p>
<b>Purpose</b>
</p>
<ul>
<li>Understand the Glacier restore process</li>
<li>Test pictures from Deep Glacier backup by running sha256deep</li>
<li>Check if able to restore and how to transfer the data from S3</li>
</ul>
<p>
<b>Learning</b>
</p>
<ul>
<li>Unable to do through rclone. Did through the AWS console. However found out that actually my rclone only had read only permissions, so changed this for future restore. I only use Glacier once a year to upload pictures, so must have restored read only access via AWS console.</li>
<li>My version of rclone did not support status checking, so I used AWS console instead.</li>
</ul>

<p>
I wanted to learn the console first, to understand how this process worked visually. I have made it easier for myself to restore data by packing each year's worth of pictures into a separate archive. I choose 2009 as a test today.
</p>

<p>
In the console, choose the file you want to restore, then select "Actions" button and choose "Initiate restore". You will be asked how many days you want the restored object to stay on S3 before deleting; during the process your Glacier object remains in Glacier. I choose 1 day and picked standard restore. The 2009 object is less than 1 GB. 
</p>

<p>
<img src="./23/pasted_image.png">
</p>

<p>
This takes 12 hours. To download, either select the file in AWS console or use rclone to copy off. I am not sure when my restore was completed, but my the next morning it was ready to go.
</p>

<p>
<img src="./23/pasted_image001.png">
</p>

<p>
I did not have version 1.64+ of rclone so could not <a href="https://forum.rclone.org/t/aws-s3-glacier-monitor-restore-status-command-for-glacier-restoring-process/41373" title="monitor" class="https">monitor</a> the restore progress using the command:
</p>

<p>
<tt>rclone backend restore-status remote:</tt> 
</p>

<p>
When done:
</p>

<p>
<img src="./23/pasted_image002.png">
</p>

<p>
It was easy to copy the object. As I am using rlcone encryption, I used rclone to copy the object back to my PC. To restore, use the same path as the Glacier object, e.g.
</p>

<p>
<tt>rclone copy --progress remote:directory/object /local/disk/</tt>
</p>


<p>
Once copied, I extracted the tar volume and everything worked as intended.
</p>

<ul>
<li><a href="https://rclone.org/s3/#restore" title="Read the rclone manual" class="https">Read the rclone manual</a></li>
<li><a href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/restoring-objects.html" title="Read the AWS manual" class="https">Read the AWS manual</a></li>
</ul>


                <h3>Conclusion<a name='Conclusion_1_3' class="offset-anchor"></a></h3>
              <p>
Simple one, test this process before you need it. I cannot think of anything worse in the world of data than restoring a backup that does not work! 
</p>

            
            <span class="backlinks">
                <hr class='footnotes'>
                <b>Backlinks:</b>
                <br />
                <a href='../../Index.html'>Journal:Index</a>
                
<br />
                <a href='../09.html'>Journal:2023:09</a>
                
<br />
                <a href='../../2024/03/26.html'>Journal:2024:03:26</a>
                
            </span>

            

        </main>
      </div>
    </div>
  </body>
</html>
